# .clinerules â€” benikvandaagjarig.nl

## ğŸ” Documentatie & context
- **Lees altijd `projectbrief.md`** bij start van een taak.
- **Check `progress.md`** voor status. Voeg nieuwe taken toe met datum als ze ontbreken.
- Houd je aan de **architectuur, naamgeving en structuur** uit `projectbrief.md`.
- **Design foundation**: gebruik `index.html` als basis voor UI/UX implementatie.

## ğŸ§± Stack & projectstandaarden
- **Framework:** **Vanilla JS/HTML + Vite** + **TypeScript (strict)**.
- **Styling:** **Modern CSS met custom properties**.
- **Animatie:** CSS keyframes (performance-first), `canvas-confetti` (lazy load).
- **Hosting:** Vercel.
- **Taal site:** **Nederlands** (copy, UI, aria-labels).
- **Geen PII**: geboortedata **niet opslaan**; log alleen events zonder persoonsgegevens.

## ğŸ—‚ï¸ Code-structuur & modulariteit
- Houd bestanden **< 300 regels** waar mogelijk (max **500**). Split logisch op in modules.
- Mappen:
  ```
  src/
  â”œâ”€â”€ index.html          # Main entry point
  â”œâ”€â”€ styles/
  â”‚   â”œâ”€â”€ main.css        # Core styles, custom properties
  â”‚   â””â”€â”€ animations.css  # Balloons, confetti, transitions
  â”œâ”€â”€ scripts/
  â”‚   â”œâ”€â”€ birthday-logic.ts  # Date calculation, validation
  â”‚   â”œâ”€â”€ animations.ts      # Confetti, balloons, celebrations  
  â”‚   â”œâ”€â”€ sharing.ts         # Social media integration
  â”‚   â””â”€â”€ main.ts           # App initialization
  â””â”€â”€ utils/
      â”œâ”€â”€ date-helpers.ts   # Date utilities, leap year logic
      â””â”€â”€ dom-helpers.ts    # DOM manipulation helpers
  ```
- **Consistente imports** (ES modules) en duidelijke function interfaces met TypeScript.

## ğŸ§ª Testen & betrouwbaarheid
- **Unit tests:** Vitest voor logica (date calculations, validation).
- **E2E:** Playwright voor user flows.
- **Toegankelijkheid:** `axe-core` voor critical flows.
- **Targets per feature:**
  - 1 "happy path" (vandaag jarig)
  - 1 edge case (29-02 schrikkeljaar)
  - 1 failure/invalid input
- Testen staan in `tests/` met spiegelende structuur.

## ğŸ¯ UX/A11y/Performance (niet-onderhandelbaar)
- **Accessibility:**
  - Respecteer `prefers-reduced-motion`; disable/verminder confetti/ballonnen.
  - Semantische HTML, focus states, labels/aria, contrast **AA**.
  - Volledig toetsenbordbedienbaar.
  - Screen reader support voor alle interacties.
- **Performance budget:**
  - **Totale bundle â‰¤ 50KB gz** (vanilla voordeel).
  - Confetti **dynamic import** alleen bij "jarig".
  - System fonts first, custom fonts alleen met `display=swap`.
  - Lazy load non-critical assets.
- **Lighthouse**: â‰¥ 95 op Performance, Accessibility, Best Practices, SEO (in CI meten).

## ğŸ” Security & privacy (GDPR)
- **Headers** (via `vercel.json` config):
  - HSTS (na live HTTPS): `max-age=31536000; includeSubDomains; preload`
  - CSP **strak**; alleen origins whitelisten die Ã©cht nodig zijn (analytics/ads pas na consent).
  - `X-Content-Type-Options: nosniff`
  - `Referrer-Policy: strict-origin-when-cross-origin`
  - `Permissions-Policy`: alles uit behalve wat nodig is
  - `X-Frame-Options: DENY`
- **Consent** verplicht vÃ³Ã³r laden van analytics/ads.
- **Analytics:** Plausible/Umami (cookieloos). Geen geboortedata wegschrijven. Alleen boolean/event-telemetrie.

## ğŸ“£ Social sharing
- **Web Share API** eerst; fallback naar platform-URL's (WhatsApp, Facebook, X, LinkedIn).
- **Dynamische OG-images** via serverless function of static variants.
- **Share teksten** (uit `projectbrief.md`):
  - Jarig: "ğŸ‰ Ik ben vandaag jarig! Check het zelf op benikvandaagjarig.nl"
  - Niet jarig: "Nee, ik ben niet jarigâ€¦ Ben jij het wel? ğŸ‘‰ benikvandaagjarig.nl"

## ğŸ¨ Design system (van index.html prototype)
- **Kleuren** (CSS custom properties):
  ```css
  :root {
    --cherry-blossom: #e8aeb7;
    --uranian-blue: #b8e1ff;
    --ice-blue: #a9fff7;
    --light-green: #94fbab;
    --cambridge-blue: #82aba1;
  }
  ```
- **Typography**: System font stack voor snelheid
- **Spacing**: Consistent met rem/em units
- **Animations**: GPU-accelerated, respecteer reduced-motion
- **Components**: Glassmorphism containers, gradient buttons

## ğŸš€ Development workflow
- **Lokaal draaien**: `npm run dev` (Vite dev server)
- **Build**: `npm run build` (optimized production build)
- **Preview**: `npm run preview` (test production build)
- **Deploy**: Vercel auto-deploy op main branch
- **Linting**: ESLint + Prettier voor code quality

## ğŸ“Š Monitoring & analytics
- **Core Web Vitals**: Monitor in productie
- **Usage tracking**: 
  - Form submissions (zonder data)
  - Birthday vs not-birthday ratio
  - Share button clicks
  - Browser/device stats
- **Error tracking**: Console errors, failed interactions

## ğŸ¯ Specifieke implementatie-eisen
- **Date logic**: Client-side only, geen server calls
- **Leap year**: Speciale melding voor 29-02 in non-leap years
- **Age calculation**: Toon leeftijd bij resultaat
- **Sound effects**: Alleen na user interaction (autoplay policy)
- **Confetti**: Canvas-based, performance-optimized
- **Balloons**: CSS-only animaties, hardware-accelerated

## ğŸ”§ Build & deploy configuratie
```json
// package.json scripts
{
  "dev": "vite",
  "build": "tsc && vite build",
  "preview": "vite preview",
  "test": "vitest",
  "test:e2e": "playwright test",
  "lint": "eslint src --ext .ts,.js",
  "type-check": "tsc --noEmit"
}
```

## ğŸ› Error handling & fallbacks
- **Invalid dates**: Duidelijke Nederlandse foutmeldingen
- **Confetti failure**: Graceful fallback zonder crash
- **Share API failure**: Automatisch fallback naar URLs
- **Analytics failure**: Geen impact op core functionality
- **Font loading failure**: System fonts als backup

## ğŸ‰ Celebratie features (uit prototype)
- **Jarig**: Confetti + ballonnen + geluid + "Gefeliciteerd!"
- **Niet jarig**: Speelse "Aan het werk!" boodschap
- **Schrikkeljaar**: Custom melding voor 29-02
- **Age display**: Altijd leeftijd tonen
- **Share prompts**: Context-specifieke teksten

## ğŸ” Testing scenarios
1. **Vandaag jarig**: Volledige celebratie flow
2. **Niet jarig**: Standard flow + share buttons  
3. **29 februari non-leap**: Speciale melding
4. **Invalide datum**: Error handling
5. **Keyboard navigation**: Volledige a11y flow
6. **Reduced motion**: Animaties uit/verminderd
7. **Mobile/desktop**: Responsive gedrag
8. **Share functionality**: Alle platforms

---

**Onthoud:** De `index.html` prototype bevat alle core functionaliteit. Gebruik dit als leidraad voor de productie-implementatie, behoud alle UX details en celebratie-effecten!